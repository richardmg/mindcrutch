<html>
    <head>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script>
        <script src="window.js"></script>
        <script src="woocanvas.js"></script>
        <script src="wooimagepalette.js"></script>
        <link rel="stylesheet" type="text/css" href="window.css">
        <link rel="stylesheet" type="text/css" href="components.css">

        <script>
            $(function() {
                var WooLayer = function(url) {
                    this.url = url;
                    this.x = 0;
                    this.y = 0;
                    this.rotation = 0;
                    this.scale = 1;
                    this.image = new Image();
                    this.image.src = url;
                };

                var layers = [];

                var canvas = $(".WooCanvas");
                canvas[0].width = canvas.width();
                canvas[0].height = canvas.height();
                var context = canvas[0].getContext('2d');
                //context.fillStyle = "#ff0000";
                //context.fillRect(0, 0, 50, 50); 
                //context.drawImage($("#monkey")[0], 10, 10);

                            var img = new Image();
                            img.src = "monkey.jpg";
                            context.drawImage(img, 10, 10);


                var paletteCallback = {
                    thumbnailPressed: function(result)
                    {
                        var layer = new WooLayer(result.url);
                        layers.push(layer);
                        context.drawImage(layer.image, layer.x, layer.y);

//                        for (var layer in layers) {
//                            context.drawImage(layer.image, layer.x, layer.y);
//                        }
                    },
                    cursor: function(cursor)
                    {
                        console.log("Search count: " + cursor.resultCount);
                    }
                }

                loadImagesFromGoogle("monkey", "#brushWin .contents", paletteCallback);
            });

        </script>

        <style type="text/css">
            body { background-color: #606060; }
        </style>
    </head>

    <body>
        <div id="brushwin" class="WooWindow" style="top:150px;left:500px;width:640px;height:400px;">
            <div class="header">Palette</div>
            <div class="contents" frameborder=0></div>
        </div>
        
        <div class="WooWindow" style="top:10px;left:10px;width:840px;height:480px;">
            <div class="header">Canvas</div>
            <canvas class="contents WooCanvas" style="background-color:#ffffff"></canvas>
        </div>

        <!--
        <div class="WooWindow" style="top:50px;left:50px;width:250px;height:150px;">
            <div class="header">File</div>
            <div class="contents">
                <div class="crutchbutton" onClick="$('#webwin').css('display', 'inline');">Open new window</div>
                <div class="crutchbutton" onClick="loadImagesFromGoogle('monkey', '#brushWin .contents', paletteCallback)">Load images</div>
            </div>
        </div>
        -->
    </body>
</html>
