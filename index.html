<html>
    <head>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script>
        <script src="window.js"></script>
        <link rel="stylesheet" type="text/css" href="window.css">
        <link rel="stylesheet" type="text/css" href="components.css">

        <script>
            $(loadImages("monkey"));

            function thumbnailPressed(result)
            {
                console.log("called: " + result);
            }

            function loadImages(searchString)
            {
                var rsz = 8
                for (var start=0; start<(5*rsz); start+=rsz) {
                    //https://developers.google.com/image-search/v1/jsondevguide#basic
                    //var url = "https://ajax.googleapis.com/ajax/services/search/images?v=1.0&imgtype=clipart&imgsz=small&rsz=8&q=" + searchString + "&callback=?";
                    var url = "https://ajax.googleapis.com/ajax/services/search/images?v=1.0&imgsz=small&rsz="
                        + rsz + "&q=" + searchString + "&start=" + start + "&callback=?";
                    //var url = "https://ajax.googleapis.com/ajax/services/search/images?v=1.0&imgtype=clipart&imgcolor=brown&rsz=8&q=" + searchString + "&callback=?";
                    $.getJSON(url, function(json) {
                            //console.log("Return:" + JSON.stringify(json));
                            var view = $($("#brushwin .contents").get(0));
                            for (var i in json.responseData.results) {
                                var r = json.responseData.results[i];
                                view.append("<div class='thumbnail' onmousedown='thumbnailPressed(&quot;"
                                    + r.url
                                    + "&quot;)'><img src='" + r.tbUrl + "'></img></div>");
                            }
                            //console.log("count: " + json.responseData.cursor.resultCount);
                    });
                }
            }
        </script>

        <style type="text/css">
            body { background-color: #606060; }
        </style>
    </head>

    <body>
        <div id="webwin" class="toolWindow" style="display:none; top:150px;left:500px;width:640px;height:400px;" autoraise="false">
            <div class="header">Window title</div>
            <iframe class="contents" frameborder=0 src="http://www.youtube.com/embed/DzDCBgJLhYw"></iframe>
        </div>

        <div id="brushwin" class="toolWindow" style="top:150px;left:500px;width:640px;height:400px;">
            <div class="header">Palette</div>
            <div class="contents" frameborder=0></div>
        </div>
        
        <div class="toolWindow" style="top:250px;left:200px;width:150px;height:200px;">
            <div class="header">Tools</div>
            <div class="contents"><button onClick="$('#webwin').css('display', 'inline');">Open new window</button></div>
        </div>

        <div class="toolWindow" style="z-index:1; top:50px;left:50px;width:250px;height:150px;">
            <div class="header">Stays on top</div>
            <div class="contents">
                <div class="crutchbutton" onClick="$('#webwin').css('display', 'inline');">Open new window</div>
                <div class="crutchbutton" onClick="loadImages('monkey')">Load images</div>
            </div>
        </div>
    </body>
</html>
